#!/bin/bash

# Файл PNG асосӣ
SOURCE_PNG="logo.png"

# Папкаи icons ва screenshots
mkdir -p DevQuiz/icons
mkdir -p DevQuiz/screenshots

# Андозаҳои icons
sizes=(72 96 128 192 256 384 512)

# Андозаҳо тайёр кун
for size in "${sizes[@]}"; do
    convert "$SOURCE_PNG" -resize "${size}x${size}" "DevQuiz/icons/icon-${size}.png"
done

# Манифест пурра бо icons-и тайёр
cat <<EOL > DevQuiz/manifest.json
{
  "name": "Dev Quiz Pro",
  "short_name": "DevQuiz",
  "description": "Барнома барои санҷиши донишҳои барномасозӣ.",
  "lang": "tg-TJ",
  "start_url": "/DevQuiz/",
  "scope": "/DevQuiz/",
  "display": "standalone",
  "orientation": "portrait",
  "background_color": "#0a192f",
  "theme_color": "#0a192f",
  "dir": "ltr",
  "icons": [
    {"src": "/DevQuiz/icons/icon-72.png", "sizes": "72x72", "type": "image/png", "purpose": "any"},
    {"src": "/DevQuiz/icons/icon-96.png", "sizes": "96x96", "type": "image/png", "purpose": "any"},
    {"src": "/DevQuiz/icons/icon-128.png", "sizes": "128x128", "type": "image/png", "purpose": "any"},
    {"src": "/DevQuiz/icons/icon-192.png", "sizes": "192x192", "type": "image/png", "purpose": "any"},
    {"src": "/DevQuiz/icons/icon-256.png", "sizes": "256x256", "type": "image/png", "purpose": "any"},
    {"src": "/DevQuiz/icons/icon-384.png", "sizes": "384x384", "type": "image/png", "purpose": "any"},
    {"src": "/DevQuiz/icons/icon-512.png", "sizes": "512x512", "type": "image/png", "purpose": "maskable"}
  ]
}
EOL

echo "✅ Icons-и ҳама андоза ва manifest.json пурра тайёр шуд."
